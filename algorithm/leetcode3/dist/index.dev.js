"use strict";

/**
 * è®¡ç®—å­—ç¬¦ä¸²ä¸­æœ€é•¿æ— é‡å¤å­—ç¬¦å­ä¸²çš„é•¿åº¦
 * @param {string} s - è¾“å…¥çš„å­—ç¬¦ä¸²
 * @return {number} - æœ€é•¿æ— é‡å¤å­ä¸²çš„é•¿åº¦
 */
var lengthOfLongestSubstring = function lengthOfLongestSubstring(s) {
  // åˆ›å»ºä¸€ä¸ªSeté›†åˆï¼Œç”¨æ¥å­˜å‚¨å½“å‰çª—å£ä¸­çš„å­—ç¬¦ï¼ˆè‡ªåŠ¨å»é‡ï¼‰
  var occ = new Set(); // è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œé¿å…å¤šæ¬¡è®¡ç®—

  var n = s.length; // rk: å³æŒ‡é’ˆï¼Œè¡¨ç¤ºå½“å‰å­ä¸²çš„å³è¾¹ç•Œï¼ˆåˆå§‹ä¸º-1ï¼Œè¡¨ç¤ºè¿˜æ²¡å¼€å§‹ï¼‰
  // ans: æœ€ç»ˆç­”æ¡ˆï¼Œè®°å½•æœ€é•¿å­ä¸²é•¿åº¦

  var rk = -1,
      ans = 0; // ğŸ¯ ä¸»å¾ªç¯ï¼šiæ˜¯å·¦æŒ‡é’ˆï¼Œè¡¨ç¤ºå½“å‰å­ä¸²çš„å·¦è¾¹ç•Œ

  for (var i = 0; i < n; ++i) {
    // å¦‚æœä¸æ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œéœ€è¦ç§»é™¤å·¦æŒ‡é’ˆå·¦è¾¹é‚£ä¸ªå­—ç¬¦
    // å› ä¸ºçª—å£è¦å‘å³ç§»åŠ¨äº†
    if (i != 0) {
      // åˆ é™¤å·¦è¾¹ç•Œå·¦è¾¹çš„å­—ç¬¦ï¼ˆçª—å£å·¦ç§»ï¼‰
      occ["delete"](s.charAt(i - 1));
    } // ğŸ¯ å†…å±‚å¾ªç¯ï¼šæ‰©å±•å³è¾¹ç•Œï¼Œç›´åˆ°é‡åˆ°é‡å¤å­—ç¬¦
    // æ¡ä»¶1: rk+1 < n ä¿è¯ä¸è¶Šç•Œ
    // æ¡ä»¶2: !occ.has(s.charAt(rk+1)) ä¿è¯å­—ç¬¦ä¸é‡å¤


    while (rk + 1 < n && !occ.has(s.charAt(rk + 1))) {
      // æŠŠæ–°å­—ç¬¦åŠ å…¥é›†åˆ
      occ.add(s.charAt(rk + 1)); // å³æŒ‡é’ˆå³ç§»ï¼Œæ‰©å±•çª—å£

      rk++;
    } // è®¡ç®—å½“å‰çª—å£é•¿åº¦ï¼Œå¹¶æ›´æ–°æœ€å¤§å€¼
    // rk - i + 1 = å³è¾¹ç•Œ - å·¦è¾¹ç•Œ + 1 = å½“å‰å­ä¸²é•¿åº¦


    ans = Math.max(ans, rk - i + 1);
  } // è¿”å›æœ€ç»ˆçš„æœ€é•¿æ— é‡å¤å­ä¸²é•¿åº¦


  return ans;
};