<!DOCTYPE html> <!-- HTML5 文档类型声明 -->
<html lang="en"> <!-- 根元素，语言设置为英文 -->

<head> <!-- 文档头部开始 -->
  <meta charset="UTF-8" /> <!-- 设置字符编码为 UTF-8 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <!-- 视口设置，移动端自适应 -->
  <title>Drag N Drop</title> <!-- 页面标题 -->
  <style>
    * {
      /* 通配选择器：重置所有元素默认样式 */
      margin: 0;
      /* 取消默认外边距 */
      padding: 0;
      /* 取消默认内边距 */
      box-sizing: border-box;
      /* 盒模型包含内边距与边框 */
    }

    /* 结束通配选择器规则 */
    body {
      /* 页面整体布局样式 */
      background-color: paleturquoise;
      /* 页面背景色 */
      display: flex;
      /* 启用弹性布局 */
      align-items: center;
      /* 垂直居中 */
      justify-content: center;
      /* 水平居中 */
      height: 100vh;
      /* 高度占满整个视口 */
      overflow: hidden;
      /* 隐藏溢出内容（避免滚动条） */
      margin: 0;
      /* 再次重置外边距，确保一致性 */
    }

    /* 结束 body 规则 */
    .empty {
      /* 可投放的空盒子容器样式 */
      width: 150px;
      /* 宽度 150px */
      height: 150px;
      /* 高度 150px */
      border: 3px solid palegoldenrod;
      /* 边框为淡金色实线 3px */
      margin: 10px;
      /* 外边距 10px，盒子之间留白 */
      background-color: #fff;
      /* 背景色白色 */
    }

    /* 结束 .empty 规则 */
    .fill {
      /* 被拖拽的元素（图片） */
      background-image: url("https://img1.baidu.com/it/u=400864332,910444934&fm=253&fmt=auto&app=138&f=JPEG?w=514&h=500");
      /* 设置背景图 */
      width: 145px;
      /* 宽度略小于容器，便于显示边框 */
      height: 145px;
      /* 高度略小于容器 */
      cursor: pointer;
      /* 鼠标样式为可点击/可拖拽 */
      background-size: cover;
      /* 背景图等比裁剪填充 */
    }

    /* 结束 .fill 规则 */
    .hold {
      /* 拖拽过程中应用的样式 */
      border: 3px solid #555;
      /* 深色边框，强调拖拽状态 */
    }

    /* 结束 .hold 规则 */
    /* 当奶龙移动到空盒子上时变色 */
    .hovered {
      /* 拖拽进入投放目标时的样式 */
      background-color: #333;
      /* 背景变暗 */
      border-color: white;
      /* 边框变为白色 */
      border-style: dashed;
      /* 边框样式变为虚线 */
    }

    /* 结束 .hovered 规则 */

    /* 自适应 
        媒体查询
        媒体(介)选择 超大环绕屏 PC电脑， IPAD ，手机
        media
      */
    @media (max-width: 800px) {

      /* 小于等于 800px 的屏幕生效 */
      body {
        /* 小屏下的 body 布局 */
        flex-direction: column;
        /* 改为纵向排列 */
      }

      /* 结束小屏 body 规则 */
    }

    /* 结束媒体查询 */
    /* PC端就是弹性布局 */
  </style> <!-- 样式定义结束 -->
</head> <!-- 文档头部结束 -->

<body> <!-- 文档主体开始 -->
  <div class="empty"> <!-- 第一个空盒子容器 -->
    <!-- 可以拖拽 -->
    <div class="fill" draggable="true"></div> <!-- 可拖拽的图片元素 -->
  </div> <!-- 结束第一个空盒子容器 -->
  <div class="empty"></div> <!-- 第二个空盒子容器 -->
  <div class="empty"></div> <!-- 第三个空盒子容器 -->
  <div class="empty"></div> <!-- 第四个空盒子容器 -->
  <div class="empty"></div> <!-- 第五个空盒子容器 -->

  <script>
    // <!-- 1.拿到奶龙元素 -->
    const fill = document.querySelector(".fill"); // 选择被拖拽的 DOM 元素

    // 2. 拿到空盒子元素
    const empties = document.querySelectorAll(".empty"); // 选择所有投放目标容器
    // 冒泡机制 事件委托 监听拖拽开始和拖拽结束
    fill.addEventListener("dragstart", dragStart); // 绑定拖拽开始事件
    fill.addEventListener("dragend", dragEnd); // 绑定拖拽结束事件

    // 4. 监听拖拽的元素盒子
    for (const empty of empties) { // 遍历每个目标容器并绑定拖拽相关事件
      empty.addEventListener("dragover", dragOver); // 拖拽元素在其上方经过时触发（需要阻止默认）
      empty.addEventListener("dragenter", dragEnter); // 拖拽元素进入容器时触发
      empty.addEventListener("dragleave", dragLeave); // 拖拽元素离开容器时触发
      empty.addEventListener("drop", dragDrop); // 在容器中释放拖拽元素时触发
    } // 结束遍历

    // 5. 拖拽开始事件
    function dragStart(e) { // 拖拽开始的回调函数
      if (!e.target.classList.contains("fill")) { // 若拖拽的不是指定元素
        e.preventDefault(); // 阻止默认行为
        return; // 直接返回
      }
      // 拖拽开始时添加类名
      fill.className += " hold"; // 添加高亮/拖拽态类名
      setTimeout(() => (fill.className = "invisible"), 0); // 异步设置为不可见，形成拖拽镜像
    } // dragStart 结束

    // 6. 拖拽结束事件
    function dragEnd(e) { // 拖拽结束的回调函数
      // 拖拽结束时移除类名
      fill.className = "fill"; // 还原为初始类名
    } // dragEnd 结束

    // 7. 拖拽过程中事件
    function dragOver(e) { // 拖拽元素在目标上方移动时持续触发
      e.preventDefault(); // 阻止默认，允许放置（drop）
    } // dragOver 结束

    function dragEnter(e) { // 拖拽元素进入目标容器时
      e.preventDefault(); // 阻止默认
      e.target.classList.add("hovered"); // 添加目标高亮样式
    } // dragEnter 结束

    function dragLeave(e) { // 拖拽元素离开目标容器时
      e.preventDefault(); // 阻止默认
      e.target.classList.remove("hovered"); // 移除目标高亮样式
    } // dragLeave 结束

    function dragDrop(e) { // 在目标容器中释放拖拽元素时
      e.preventDefault(); // 阻止默认
      e.target.classList.remove("hovered"); // 移除目标高亮样式
      e.target.appendChild(fill); // 将被拖拽元素追加到目标容器中
    } // dragDrop 结束
  </script> <!-- 脚本定义结束 -->
</body> <!-- 文档主体结束 -->

</html> <!-- 文档结束 -->